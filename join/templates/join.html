{% extends "layout.html" %}
{% block body %}
<div class="jumbotron text-center">
    <h2 class="helper-title">Interested in joining</h2>
    <h1 class="title">Stuyvesant Key Club?</h1>
    <img class="img-responsive center-block" src="/images/logo.png" alt="Key Club Logo" />
</div>
<div class="row">
    <p style="text-align:center">Please submit your information <a href="https://docs.google.com/forms/d/e/1FAIpQLSeilPQbEemJnTv7DV5fLUYlOjGxvcycGrnp7Drob6ela8aicw/viewform?c=0&w=1">here</a>! Thank you for your interest.</p>
</div>
<div class="spinner-background">
    <div class="spinner">
        <div class="dot1"></div>
        <div class="dot2"></div>
    </div>
</div>

{% endblock %}
{% block scripts %}
<script>
$('#inputId').keydown(function(event) {
    return event.which < 58 || (event.which >= 96 && event.which <= 105);
});
$(document).ready(function() {
    $('#join-form').submit(function() {
        if (checkForm()) {
            $('.spinner-background').show();
            $('input').each(function() {$(this).prop('readonly', true);});
            $('#submit-button').button('loading');
        }
        else {
            return false;
        }
    });
});
function checkForm() {
    var isFormGood = true;
    isFormGood = checkName() && isFormGood;
    isFormGood = checkId() && isFormGood;
    isFormGood = checkEmail() && isFormGood;
    return isFormGood;
}
function checkName() {
    var name = $('#inputName').val();
    $('#nameHelpBlock').fadeOut(); // Add blink effect
    if (name.length > 0 && name.indexOf(" ") != -1) { // Not empty and contains space
        $('#inputName').parent().parent().removeClass("has-error");
        return true;
    }
    else {
        $('#inputName').parent().parent().addClass("has-error");
        $('#nameHelpBlock').fadeIn();
        return false;
    }
}
function checkId() {
    var id = parseInt($('#inputId').val());
    $('#idHelpBlock').fadeOut(); // Add blink effect
    if (id >= 1000 && id <= 9999) { // Between 1000 and 9999
        $('#inputId').parent().parent().removeClass("has-error");
        return true;
    }
    else {
        $('#inputId').parent().parent().addClass("has-error");
        $('#idHelpBlock').fadeIn();
        return false;
    }
}
function checkEmail() {
    var re = /^([a-zA-Z0-9+_\-\.])+@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,6})$/;
    $('#emailHelpBlock').fadeOut(); // Add blink effect
    if (re.test($('#inputEmail').val())) { // Valid email
        $('#inputEmail').parent().parent().removeClass("has-error");
        return true;
    }
    else {
        $('#inputEmail').parent().parent().addClass("has-error");
        $('#emailHelpBlock').fadeIn();
        return false;
    }
}
</script>
{% endblock %}
